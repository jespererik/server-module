2018-03-02 10:20:17,212 DBHelper create_connection DEBUG ENTER
2018-03-02 10:20:17,212 DBHelper create_connection INFO CONNECTING TO: ../shared/database/test.db
2018-03-02 10:20:17,214 DBHelper create_node_tables DEBUG ENTER
2018-03-02 10:20:17,214 DBHelper create_table DEBUG ENTER
2018-03-02 10:20:17,214 DBHelper create_table DEBUG Creating table CREATE TABLE IF NOT EXISTS nodes(
                    id integer PRIMARY KEY, 
                    name text NOT NULL UNIQUE ,
                    location text,
                    created DateTime DEFAULT CURRENT_DATE
                );
            
2018-03-02 10:20:17,214 DBHelper create_table INFO Created table CREATE TABLE IF NOT EXISTS nodes(
                    id integer PRIMARY KEY, 
                    name text NOT NULL UNIQUE ,
                    location text,
                    created DateTime DEFAULT CURRENT_DATE
                );
            
2018-03-02 10:20:17,215 DBHelper create_table DEBUG EXIT
2018-03-02 10:20:17,215 DBHelper create_table DEBUG ENTER
2018-03-02 10:20:17,215 DBHelper create_table DEBUG Creating table CREATE TABLE IF NOT EXISTS sensors(
                id integer PRIMARY KEY, 
                name text NOT NULL,
                node_id integer, 
                    FOREIGN KEY (node_id) REFERENCES nodes(id) ON DELETE RESTRICT ON UPDATE CASCADE,
                UNIQUE (id, node_id)
                UNIQUE (node_id, name)     
                );                         
            
2018-03-02 10:20:17,215 DBHelper create_table INFO Created table CREATE TABLE IF NOT EXISTS sensors(
                id integer PRIMARY KEY, 
                name text NOT NULL,
                node_id integer, 
                    FOREIGN KEY (node_id) REFERENCES nodes(id) ON DELETE RESTRICT ON UPDATE CASCADE,
                UNIQUE (id, node_id)
                UNIQUE (node_id, name)     
                );                         
            
2018-03-02 10:20:17,215 DBHelper create_table DEBUG EXIT
2018-03-02 10:20:17,215 DBHelper create_table DEBUG ENTER
2018-03-02 10:20:17,215 DBHelper create_table DEBUG Creating table CREATE TABLE IF NOT EXISTS readings (
                readingtype text, 
                data float, 
                timestamp DateTime,
                sensor_id integer NOT NULL,
                    FOREIGN KEY (sensor_id) REFERENCES sensors(id) ON DELETE RESTRICT ON UPDATE CASCADE
                );
            
2018-03-02 10:20:17,215 DBHelper create_table INFO Created table CREATE TABLE IF NOT EXISTS readings (
                readingtype text, 
                data float, 
                timestamp DateTime,
                sensor_id integer NOT NULL,
                    FOREIGN KEY (sensor_id) REFERENCES sensors(id) ON DELETE RESTRICT ON UPDATE CASCADE
                );
            
2018-03-02 10:20:17,215 DBHelper create_table DEBUG EXIT
2018-03-02 10:20:17,215 DBHelper create_node_tables DEBUG EXIT
2018-03-02 10:20:17,224 _internal _log WARNING  * Debugger is active!
2018-03-02 10:20:17,241 _internal _log INFO  * Debugger PIN: 253-412-455
2018-03-02 10:20:20,363 Server node_init_packet_handler DEBUG ENTER
2018-03-02 10:20:20,363 Server __is_init_packet DEBUG ENTER
2018-03-02 10:20:20,363 Server __is_init_packet DEBUG 
 Check passed for {u'LOCATION': u'inhouse', u'NODE_NAME': u''}
2018-03-02 10:20:20,363 Server __is_init_packet DEBUG EXIT
2018-03-02 10:20:20,363 Server create_new_node DEBUG ENTER
2018-03-02 10:20:20,363 DBHelper is_empty_table DEBUG ENTER
2018-03-02 10:20:20,363 DBHelper is_empty_table DEBUG is empty? nodes
2018-03-02 10:20:20,364 Server create_new_node DEBUG 
   No nodes in table "nodes" creating first node "Node#1"
2018-03-02 10:20:20,364 DBHelper insert_node DEBUG ENTER
2018-03-02 10:20:20,364 DBHelper insert_node DEBUG   Inserting ('Node#1', u'inhouse') into table "nodes"
2018-03-02 10:20:20,366 DBHelper insert_node INFO    Inserted ('Node#1', u'inhouse') into table "nodes"
2018-03-02 10:20:20,366 Server create_new_node DEBUG EXIT
2018-03-02 10:20:20,366 Server node_init_packet_handler DEBUG EXIT
2018-03-02 10:20:20,367 _internal _log INFO 127.0.0.1 - - [02/Mar/2018 10:20:20] "POST /node_init HTTP/1.1" 200 -
2018-03-02 10:20:20,386 Server node_data_packet_handler DEBUG ENTER
2018-03-02 10:20:20,386 Server __is_sensor_data_packet DEBUG ENTER
2018-03-02 10:20:20,386 Server __is_sensor_data_packet DEBUG 
 Check passed for {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 0, u'TYPE': u'Temperature'}
2018-03-02 10:20:20,386 Server __is_sensor_data_packet DEBUG EXIT
2018-03-02 10:20:20,386 Server node_data_packet_handler DEBUG 
 Recieved "sensor_data_packet" {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 0, u'TYPE': u'Temperature'}, adding to database
2018-03-02 10:20:20,386 Server add_node_reading DEBUG ENTER
2018-03-02 10:20:20,387 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:20,387 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:20,387 DBHelper get_sensor_id_by_name DEBUG Found None
2018-03-02 10:20:20,387 DBHelper get_sensor_id_by_name DEBUG EXIT
2018-03-02 10:20:20,387 Server add_node_reading DEBUG 
 "sensor" DHT12 not found on "node" adding
2018-03-02 10:20:20,387 Server add_sensor_to_node DEBUG ENTER
2018-03-02 10:20:20,387 Server add_sensor_to_node DEBUG 
 QUERYING: Table: "nodes" value: "Node#1"
2018-03-02 10:20:20,387 DBHelper get_node_id_by_name DEBUG ENTER
2018-03-02 10:20:20,387 DBHelper get_node_id_by_name DEBUG   Querying for id with name Node#1 in nodes
2018-03-02 10:20:20,388 Server add_sensor_to_node DEBUG 
 INSERT "(u'DHT12', 1)"
2018-03-02 10:20:20,388 DBHelper insert_sensor DEBUG ENTER
2018-03-02 10:20:20,388 DBHelper insert_sensor DEBUG   Inserting (u'DHT12', 1) into table "sensors"
2018-03-02 10:20:20,390 DBHelper insert_sensor INFO    Inserted (u'DHT12', 1) into table "sensors"
2018-03-02 10:20:20,390 Server add_sensor_to_node DEBUG EXIT
2018-03-02 10:20:20,390 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:20,390 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:20,390 Server add_node_reading DEBUG 
 Inserting "reading" (u'Temperature', 0, u'2018-03-02 10:20:20.369149', 1)
2018-03-02 10:20:20,390 DBHelper insert_reading DEBUG ENTER
2018-03-02 10:20:20,391 DBHelper insert_reading DEBUG   Inserting (u'Temperature', 0, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:20,392 DBHelper insert_reading INFO    Inserted (u'Temperature', 0, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:20,392 DBHelper insert_reading DEBUG EXIT
2018-03-02 10:20:20,392 Server add_node_reading DEBUG EXIT
2018-03-02 10:20:20,392 _internal _log INFO 127.0.0.1 - - [02/Mar/2018 10:20:20] "POST /POST/reading HTTP/1.1" 201 -
2018-03-02 10:20:25,405 Server node_data_packet_handler DEBUG ENTER
2018-03-02 10:20:25,405 Server __is_sensor_data_packet DEBUG ENTER
2018-03-02 10:20:25,405 Server __is_sensor_data_packet DEBUG 
 Check passed for {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 1.4021382359249657, u'TYPE': u'Temperature'}
2018-03-02 10:20:25,405 Server __is_sensor_data_packet DEBUG EXIT
2018-03-02 10:20:25,405 Server node_data_packet_handler DEBUG 
 Recieved "sensor_data_packet" {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 1.4021382359249657, u'TYPE': u'Temperature'}, adding to database
2018-03-02 10:20:25,405 Server add_node_reading DEBUG ENTER
2018-03-02 10:20:25,405 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:25,405 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:25,406 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:25,406 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:25,406 Server add_node_reading DEBUG 
 Inserting "reading" (u'Temperature', 1.4021382359249657, u'2018-03-02 10:20:20.369149', 1)
2018-03-02 10:20:25,406 DBHelper insert_reading DEBUG ENTER
2018-03-02 10:20:25,406 DBHelper insert_reading DEBUG   Inserting (u'Temperature', 1.4021382359249657, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:25,408 DBHelper insert_reading INFO    Inserted (u'Temperature', 1.4021382359249657, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:25,408 DBHelper insert_reading DEBUG EXIT
2018-03-02 10:20:25,409 Server add_node_reading DEBUG EXIT
2018-03-02 10:20:25,409 _internal _log INFO 127.0.0.1 - - [02/Mar/2018 10:20:25] "POST /POST/reading HTTP/1.1" 201 -
2018-03-02 10:20:30,416 Server node_data_packet_handler DEBUG ENTER
2018-03-02 10:20:30,416 Server __is_sensor_data_packet DEBUG ENTER
2018-03-02 10:20:30,416 Server __is_sensor_data_packet DEBUG 
 Check passed for {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 9.981579160946175, u'TYPE': u'Temperature'}
2018-03-02 10:20:30,416 Server __is_sensor_data_packet DEBUG EXIT
2018-03-02 10:20:30,417 Server node_data_packet_handler DEBUG 
 Recieved "sensor_data_packet" {u'TIMESTAMP': u'2018-03-02 10:20:20.369149', u'NODE_NAME': u'Node#1', u'SENSOR_NAME': u'DHT12', u'DATA': 9.981579160946175, u'TYPE': u'Temperature'}, adding to database
2018-03-02 10:20:30,417 Server add_node_reading DEBUG ENTER
2018-03-02 10:20:30,417 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:30,417 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:30,417 DBHelper get_sensor_id_by_name DEBUG ENTER
2018-03-02 10:20:30,417 DBHelper get_sensor_id_by_name DEBUG Querying for name DHT12 with nodes.name Node#1 in sensor
2018-03-02 10:20:30,417 Server add_node_reading DEBUG 
 Inserting "reading" (u'Temperature', 9.981579160946175, u'2018-03-02 10:20:20.369149', 1)
2018-03-02 10:20:30,417 DBHelper insert_reading DEBUG ENTER
2018-03-02 10:20:30,417 DBHelper insert_reading DEBUG   Inserting (u'Temperature', 9.981579160946175, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:30,419 DBHelper insert_reading INFO    Inserted (u'Temperature', 9.981579160946175, u'2018-03-02 10:20:20.369149', 1) into table "readings"
2018-03-02 10:20:30,420 DBHelper insert_reading DEBUG EXIT
2018-03-02 10:20:30,420 Server add_node_reading DEBUG EXIT
2018-03-02 10:20:30,420 _internal _log INFO 127.0.0.1 - - [02/Mar/2018 10:20:30] "POST /POST/reading HTTP/1.1" 201 -
